# Kube-Controller-Manager

- A controller is a process that continuously monitors the state of various components within the system & works towards bringing the whole system in desired functioning state.
- `Node-Controller`: is responsable for monitoring the status of the nodes & taking necessary actions to keep the application running. It does that through kube-apiserver. Node-Controller checks the status of the nodes every 5 seconds.
  - `Watch Status`
  - `Remediate Situation`
  - `Node Monitor Period = 5s`
  - `Node Monitor Grace Period = 40s` [Node-Controller waits for 40s, before it marks Node as UNREACHABLE]
  - `POD Eviction Timeout = 5m` [Node-Controller gives 5 mins to the Node to get it back, if the Node doesn't get back, Node-Controller removes all the pods and place the pods in a healthy nodes, if the pods are in replicasets]
- `Replication-Controller`: is responsable for monitoring the status of the replica sets and ensuring that the desired number of PODs are available at all times within the set. If a POD dies, it creates another one.
- `Deployment-Controller`
- `NameSpace-Controller`
- `Endpoint-Controller`
- `Service-Account-Controller`
- `Job-Controller`
- `PV-Protection-Controller`
- `Stateful-Set-Controller`
- `CronJob-Controller`
- `ReplicaSet-Controller`

- All the Controller are packaged into a single process known as Kubernetes Controller Manager.
- Installation of kube-controller-manager
  - via kubeadm tool
    - kubeadm deploys the `kube-controller-manager` as a pod in the `kube-system` namespace on the master node.
    - `kubectl get pods -n kube-system`
    - `/etc/kubernetes/manifests/kube-controller-manage.yaml`
  - using binary package, install it as a service
    - `/etc/systemd/system/kube-controller-manager.service`
    - `ps -aux | grep kube-controller-manager`
    - `kube-controller-manager.service`
      - `--node-monitor-periods=5s`
      - `--node-monitor-grace-period=40s`
      - `--pod-eviction-timeout=5m0s`
  - There is an additional option called `controllers` to specify which controllers to enable.
    - `--controllers stringSlice    Default: [*]`
  - Bydefault all of the controllers are enable.
